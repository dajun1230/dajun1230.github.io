<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>项目搭建 | 小杨--个人笔记</title>
    <meta name="description" content="详情描述">
    <link rel="icon" href="/iamges/favicons.ico">
    
    <link rel="preload" href="/assets/css/0.styles.56c699db.css" as="style"><link rel="preload" href="/assets/js/app.af8c451a.js" as="script"><link rel="preload" href="/assets/js/35.1141f38d.js" as="script"><link rel="prefetch" href="/assets/js/10.f9ce7cc1.js"><link rel="prefetch" href="/assets/js/11.dffd68cf.js"><link rel="prefetch" href="/assets/js/12.88b968c3.js"><link rel="prefetch" href="/assets/js/13.ee021609.js"><link rel="prefetch" href="/assets/js/14.0d9da61d.js"><link rel="prefetch" href="/assets/js/15.cf7a716a.js"><link rel="prefetch" href="/assets/js/16.68eea69c.js"><link rel="prefetch" href="/assets/js/17.9c9ed280.js"><link rel="prefetch" href="/assets/js/18.3fd6d31e.js"><link rel="prefetch" href="/assets/js/19.d2c7fa8e.js"><link rel="prefetch" href="/assets/js/2.c36408f4.js"><link rel="prefetch" href="/assets/js/20.ad9fa36b.js"><link rel="prefetch" href="/assets/js/21.3829d637.js"><link rel="prefetch" href="/assets/js/22.6294a8c2.js"><link rel="prefetch" href="/assets/js/23.16fcadda.js"><link rel="prefetch" href="/assets/js/24.9f3982d3.js"><link rel="prefetch" href="/assets/js/25.cdd1e6a9.js"><link rel="prefetch" href="/assets/js/26.18563480.js"><link rel="prefetch" href="/assets/js/27.4705311f.js"><link rel="prefetch" href="/assets/js/28.09fcc8b4.js"><link rel="prefetch" href="/assets/js/29.44f1703f.js"><link rel="prefetch" href="/assets/js/3.b8072446.js"><link rel="prefetch" href="/assets/js/30.adbb594e.js"><link rel="prefetch" href="/assets/js/31.00599d01.js"><link rel="prefetch" href="/assets/js/32.61ba3371.js"><link rel="prefetch" href="/assets/js/33.8420b93c.js"><link rel="prefetch" href="/assets/js/34.00f8c821.js"><link rel="prefetch" href="/assets/js/36.366705ba.js"><link rel="prefetch" href="/assets/js/37.edb9b8b9.js"><link rel="prefetch" href="/assets/js/38.b440a287.js"><link rel="prefetch" href="/assets/js/39.e9b1aaa4.js"><link rel="prefetch" href="/assets/js/4.1c4d5fc0.js"><link rel="prefetch" href="/assets/js/40.16da07a5.js"><link rel="prefetch" href="/assets/js/41.350c3c58.js"><link rel="prefetch" href="/assets/js/42.ab0911d4.js"><link rel="prefetch" href="/assets/js/43.994d22b7.js"><link rel="prefetch" href="/assets/js/44.48fc8e1b.js"><link rel="prefetch" href="/assets/js/45.29742ea8.js"><link rel="prefetch" href="/assets/js/46.5762f1d8.js"><link rel="prefetch" href="/assets/js/47.71e23426.js"><link rel="prefetch" href="/assets/js/48.95d09945.js"><link rel="prefetch" href="/assets/js/49.e86f75cc.js"><link rel="prefetch" href="/assets/js/5.f72b9a19.js"><link rel="prefetch" href="/assets/js/50.d8548f6b.js"><link rel="prefetch" href="/assets/js/51.b0a7ddfe.js"><link rel="prefetch" href="/assets/js/52.4b63c945.js"><link rel="prefetch" href="/assets/js/53.59e69768.js"><link rel="prefetch" href="/assets/js/54.0fa4079f.js"><link rel="prefetch" href="/assets/js/55.32bea307.js"><link rel="prefetch" href="/assets/js/6.d9031ffc.js"><link rel="prefetch" href="/assets/js/7.739ee4af.js"><link rel="prefetch" href="/assets/js/8.79012347.js"><link rel="prefetch" href="/assets/js/9.7bcfb182.js">
    <link rel="stylesheet" href="/assets/css/0.styles.56c699db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小杨--个人笔记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/react/" class="nav-link router-link-active">React</a></div><div class="nav-item"><a href="/flutter/" class="nav-link">Flutter</a></div><div class="nav-item"><a href="/other/" class="nav-link">其他</a></div><div class="nav-item"><a href="/ps/" class="nav-link">Ps教程</a></div><div class="nav-item"><a href="https://github.com/dajun1230/My_notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/react/" class="nav-link router-link-active">React</a></div><div class="nav-item"><a href="/flutter/" class="nav-link">Flutter</a></div><div class="nav-item"><a href="/other/" class="nav-link">其他</a></div><div class="nav-item"><a href="/ps/" class="nav-link">Ps教程</a></div><div class="nav-item"><a href="https://github.com/dajun1230/My_notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>React</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/react/react.html" class="sidebar-link">React基础</a></li><li><a href="/react/install.html" class="active sidebar-link">项目搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/install.html#create-react-app" class="sidebar-link">create-react-app</a></li><li class="sidebar-sub-header"><a href="/react/install.html#create-create-app-dva" class="sidebar-link">create-create-app + dva</a></li><li class="sidebar-sub-header"><a href="/react/install.html#create-umi" class="sidebar-link">create-umi</a></li><li class="sidebar-sub-header"><a href="/react/install.html#generator-react-webpack" class="sidebar-link">generator-react-webpack</a></li><li class="sidebar-sub-header"><a href="/react/install.html#构建：webpack一步一步构建01" class="sidebar-link">构建：webpack一步一步构建01</a></li><li class="sidebar-sub-header"><a href="/react/install.html#生命周期" class="sidebar-link">生命周期</a></li></ul></li><li><a href="/react/base.html" class="sidebar-link">基础知识</a></li><li><a href="/react/newreact.html" class="sidebar-link">React 16.x</a></li><li><a href="/react/reactrouter.html" class="sidebar-link">React Router</a></li><li><a href="/react/redux.html" class="sidebar-link">Redux 基础</a></li><li><a href="/react/rhooks.html" class="sidebar-link">React Hooks</a></li><li><a href="/react/umi.html" class="sidebar-link">UmiJS</a></li><li><a href="/react/next.html" class="sidebar-link">Next</a></li><li><a href="/react/demo.html" class="sidebar-link">经典案例</a></li><li><a href="/react/rnative.html" class="sidebar-link">React Native</a></li><li><a href="/react/taro.html" class="sidebar-link">Taro多端开发</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="项目搭建"><a href="#项目搭建" class="header-anchor">#</a> 项目搭建</h1> <h2 id="create-react-app"><a href="#create-react-app" class="header-anchor">#</a> create-react-app</h2> <blockquote><p>基于create-react-app官方脚手架搭建dva模式</p></blockquote> <p>creat-react-app优点</p> <div class="language-sh extra-class"><pre class="language-text"><code>● 无需配置：官方的配置堪称完美，几乎不用你再配置任何东西，就可以上手开发项目。
● 高集成性：集成了对React，JSX，ES6和Flow的支持。
● 自带服务：集成了开发服务器，你可以实现开发预览一体化。
● 热更新：保存自动更新，让你的开发更简单。
● 全兼容性：自动处理CSS的兼容问题，无需添加-webkit前缀。
● 自动发布：集成好了发布成品功能，编译后直接发布，并且包含了sourcemaps功能。
</code></pre></div><p>操作步骤：</p> <ol><li>全局安装react：<strong>npm install create-react-app -g</strong></li></ol> <div class="warning custom-block"><p class="custom-block-title">提示</p> <p>● windows系统下：npm install -g create-react-app <br>
● Liunx和Mac电脑下：sudo npm install -g create-react-app</p></div> <ol start="2"><li>创建项目，目录名为project：<strong>create-react-app project</strong></li> <li>基本脚手架搭建完成，目录如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> node_modules
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">public</span>
    <span class="token operator">|</span><span class="token operator">-</span> favicon<span class="token punctuation">.</span>ico
    <span class="token operator">|</span><span class="token operator">-</span> index<span class="token punctuation">.</span>html
    <span class="token operator">|</span><span class="token operator">-</span> manifest<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">-</span> src
    <span class="token operator">|</span><span class="token operator">-</span> App<span class="token punctuation">.</span>css
    <span class="token operator">|</span><span class="token operator">-</span> App<span class="token punctuation">.</span>js
    <span class="token operator">|</span><span class="token operator">-</span> App<span class="token punctuation">.</span>test<span class="token punctuation">.</span>js
    <span class="token operator">|</span><span class="token operator">-</span> index<span class="token punctuation">.</span>css
    <span class="token operator">|</span><span class="token operator">-</span> index<span class="token punctuation">.</span>js
    <span class="token operator">|</span><span class="token operator">-</span> logo<span class="token punctuation">.</span>svg
    <span class="token operator">|</span><span class="token operator">-</span> serviceWorker<span class="token punctuation">.</span>js
<span class="token operator">|</span><span class="token operator">-</span> <span class="token punctuation">.</span>gitignore
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">-</span> <span class="token constant">README</span><span class="token punctuation">.</span>md
<span class="token operator">|</span><span class="token operator">-</span> yarn<span class="token punctuation">.</span>lock
</code></pre></div><blockquote><p>这就是脚手架目录，我们再来看package.json文件，如下：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;project&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^16.8.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react-dom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^16.8.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react-scripts&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.0.1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts start&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts build&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts test&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts eject&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;eslintConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;&gt;0.2%&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;not dead&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;not op_mini all&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;last 1 chrome version&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;last 1 firefox version&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;last 1 safari version&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时，可以通过<strong>npm start</strong>将项目运行起来，默认端口为3000</p> <ol start="4"><li>增加配置</li></ol> <blockquote><p>注意scripts执行命令中有一个eject，意为弹射暴露出所有配置，其实脚手架还是为我们封装了一些东西的，这里我们就暴露出所有配置吧。</p></blockquote> <p>运行 <strong>npm run eject</strong> ，一旦选择eject，那么所封装的组件依赖和项目结构会有所变化，此时的项目结构如图：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> config <span class="token comment">// 新增</span>
<span class="token operator">|</span><span class="token operator">-</span> node_modules
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">public</span>
<span class="token operator">|</span><span class="token operator">-</span> scripts <span class="token comment">// 新增</span>
<span class="token operator">|</span><span class="token operator">-</span> src
<span class="token operator">|</span><span class="token operator">-</span> <span class="token punctuation">.</span>gitignore
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">-</span> <span class="token constant">README</span><span class="token punctuation">.</span>md
<span class="token operator">|</span><span class="token operator">-</span> yarn<span class="token punctuation">.</span>lock
</code></pre></div><p>而package.json文件内容也发生变化，如图：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;project&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;@babel/core&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.4.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@svgr/webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@typescript-eslint/eslint-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;babel-eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;babel-jest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^24.8.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;babel-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;8.0.5&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;babel-plugin-named-asset-import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.3.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;babel-preset-react-app&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;camelcase&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;case-sensitive-paths-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;css-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.1.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dotenv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dotenv-expand&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.16.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint-config-react-app&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint-plugin-flowtype&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.50.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint-plugin-import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.16.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint-plugin-jsx-a11y&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6.2.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint-plugin-react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.12.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;eslint-plugin-react-hooks&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.5.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;file-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;fs-extra&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.0.0-beta.5&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;identity-obj-proxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;is-wsl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;24.7.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;jest-environment-jsdom-fourteen&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;jest-resolve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;24.7.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;jest-watch-typeahead&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.3.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.5.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pnp-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-flexbugs-fixes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-normalize&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-preset-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6.6.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-safe-parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^16.8.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react-app-polyfill&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react-dev-utils&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react-dom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^16.8.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;resolve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.10.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;sass-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;semver&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;style-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.23.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ts-pnp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;url-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.29.6&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.2.1&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack-manifest-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.4&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;workbox-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.2.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/start.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/build.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/test.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;eslintConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-app&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;&gt;0.2%&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;not dead&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;not op_mini all&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;last 1 chrome version&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;last 1 firefox version&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;last 1 safari version&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;jest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;collectCoverageFrom&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;src/**/*.{js,jsx,ts,tsx}&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;!src/**/*.d.ts&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;setupFiles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;react-app-polyfill/jsdom&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;setupFilesAfterEnv&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;testMatch&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;&lt;rootDir&gt;/src/**/__tests__/**/*.{js,jsx,ts,tsx}&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;&lt;rootDir&gt;/src/**/*.{spec,test}.{js,jsx,ts,tsx}&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;testEnvironment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jest-environment-jsdom-fourteen&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;^.+\\.(js|jsx|ts|tsx)$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/node_modules/babel-jest&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;^.+\\.css$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/config/jest/cssTransform.js&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;^(?!.*\\.(js|jsx|ts|tsx|css|json)$)&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;rootDir&gt;/config/jest/fileTransform.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;transformIgnorePatterns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;[/\\\\]node_modules[/\\\\].+\\.(js|jsx|ts|tsx)$&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;^.+\\.module\\.(css|sass|scss)$&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;modulePaths&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleNameMapper&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;^react-native$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-native-web&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;^.+\\.module\\.(css|sass|scss)$&quot;</span><span class="token operator">:</span> <span class="token string">&quot;identity-obj-proxy&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;moduleFileExtensions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;web.js&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;web.ts&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;ts&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;web.tsx&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;tsx&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;web.jsx&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;jsx&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;node&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;watchPlugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;jest-watch-typeahead/filename&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;jest-watch-typeahead/testname&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;babel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;react-app&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此处我本地更改下3000端口为9999，避免与其他本地项目冲突，安装cross-env：(此处看需求在配置)</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install cross<span class="token operator">-</span>env
<span class="token comment">// 将package.json中的“scripts”的“start”，修改“start”命令为：</span>
<span class="token operator">-</span> <span class="token string">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node scripts/start.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 旧</span>
<span class="token operator">+</span> <span class="token string">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env PORT=9999 node scripts/start.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 新</span>
</code></pre></div><ol start="5"><li>安装less及配置</li></ol> <blockquote><p>当前react版本为16.11.0.</p></blockquote> <p>安装less：</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install less less<span class="token operator">-</span>loader <span class="token operator">-</span><span class="token constant">D</span> <span class="token comment">// 或者 yarn add less less-loader -D</span>
</code></pre></div><p>在webpack.config.js文件中进行配置：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 1.找到“// style files regexes”下先引入 */</span>
<span class="token keyword">const</span> lessRegex <span class="token operator">=</span> <span class="token regex">/\.less$/</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lessModuleRegex <span class="token operator">=</span> <span class="token regex">/\.module\.less$/</span><span class="token punctuation">;</span>
<span class="token comment">/* 2.找到sass的配置项，仿照写入less的配置 */</span> 
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> sassRegex<span class="token punctuation">,</span>
  exclude<span class="token operator">:</span> sassModuleRegex<span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token function">getStyleLoaders</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      sourceMap<span class="token operator">:</span> isEnvProduction <span class="token operator">&amp;&amp;</span> shouldUseSourceMap<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'sass-loader'</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// Don't consider CSS imports dead code even if the</span>
  <span class="token comment">// containing package claims to have no side effects.</span>
  <span class="token comment">// Remove this when webpack adds a warning or an error for this.</span>
  <span class="token comment">// See https://github.com/webpack/webpack/issues/6571</span>
  sideEffects<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> <span class="token comment">// 此处为新增项</span>
  test<span class="token operator">:</span> lessRegex<span class="token punctuation">,</span>
  exclude<span class="token operator">:</span> sassModuleRegex<span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token function">getStyleLoaders</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      sourceMap<span class="token operator">:</span> isEnvProduction <span class="token operator">&amp;&amp;</span> shouldUseSourceMap<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'less-loader'</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  sideEffects<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// Adds support for CSS Modules, but using SASS</span>
<span class="token comment">// using the extension .module.scss or .module.sass</span>
<span class="token punctuation">{</span>
  test<span class="token operator">:</span> sassModuleRegex<span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token function">getStyleLoaders</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      sourceMap<span class="token operator">:</span> isEnvProduction <span class="token operator">&amp;&amp;</span> shouldUseSourceMap<span class="token punctuation">,</span>
      modules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      getLocalIdent<span class="token operator">:</span> getCSSModuleLocalIdent<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'sass-loader'</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> <span class="token comment">// 此处为新增项</span>
  test<span class="token operator">:</span> lessModuleRegex<span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token function">getStyleLoaders</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      importLoaders<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      sourceMap<span class="token operator">:</span> isEnvProduction <span class="token operator">&amp;&amp;</span> shouldUseSourceMap<span class="token punctuation">,</span>
      modules<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      getLocalIdent<span class="token operator">:</span> getCSSModuleLocalIdent<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'less-loader'</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="create-create-app-dva"><a href="#create-create-app-dva" class="header-anchor">#</a> create-create-app + dva</h2> <blockquote><p>通过上述所有操作步骤完成基本搭建，然后采用dva的数据流。</p></blockquote> <ol><li>安装Dva库</li></ol> <blockquote><p>dva也有自己的脚手架dva-cli，也可快速构建项目，目前已升至2.x版本，采用react-router@4.x路由版本。</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>npm install dva --save
</code></pre></div><ol start="2"><li>项目改造为dva模式</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> config
<span class="token operator">|</span><span class="token operator">-</span> node_modules
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">public</span>
<span class="token operator">|</span><span class="token operator">-</span> scripts
<span class="token operator">|</span><span class="token operator">-</span> src
    <span class="token operator">|</span><span class="token operator">-</span> assets
    <span class="token operator">|</span><span class="token operator">-</span> components
    <span class="token operator">|</span><span class="token operator">-</span> models
    <span class="token operator">|</span><span class="token operator">-</span> router
    <span class="token operator">|</span><span class="token operator">-</span> routes
    <span class="token operator">|</span><span class="token operator">-</span> services
    <span class="token operator">|</span><span class="token operator">-</span> utils
<span class="token operator">|</span><span class="token operator">-</span> <span class="token punctuation">.</span>gitignore
<span class="token operator">|</span><span class="token operator">-</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">-</span> <span class="token constant">README</span><span class="token punctuation">.</span>md
<span class="token operator">|</span><span class="token operator">-</span> yarn<span class="token punctuation">.</span>lock
</code></pre></div><h2 id="create-umi"><a href="#create-umi" class="header-anchor">#</a> create-umi</h2> <h3 id="umi-通过-create-umi-提供脚手架能力，包含："><a href="#umi-通过-create-umi-提供脚手架能力，包含：" class="header-anchor">#</a> umi 通过 create-umi 提供脚手架能力，包含：</h3> <div class="language-sh extra-class"><pre class="language-text"><code>● project，通用项目脚手架，支持选择是否启用 TypeScript，以及 umi-plugin-react 包含的功能  
● ant-design-pro，仅包含 ant-design-pro 布局的脚手架，具体页面可通过 umi block 添加  
● block，区块脚手架  
● plugin，插件脚手架  
● library，依赖（组件）库脚手架，基于 umi-plugin-library
</code></pre></div><ol><li>全局安装umi，并确保版本为2.0以上：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>yarn global add umi
<span class="token comment">// 或者</span>
npm install <span class="token operator">-</span>g umi
umi <span class="token operator">-</span>v <span class="token comment">// 查看版本号，当前版本：2.12.1</span>
</code></pre></div><ol start="2"><li>使用create-umi快速搭建脚手架(切记使用cmd命令台创建)</li></ol> <blockquote><p>此处可以通过在任何目录下打开终端，输入命令 umi ui，进行可视化项目搭建。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span> mkdir umi_app
<span class="token number">2.</span> yarn create umi <span class="token comment">// 或者 npm create umi(建议前者，确保安装的是最新脚手架)</span>
<span class="token number">3.</span> 选择app <span class="token operator">&gt;</span> enter键 <span class="token operator">&gt;</span> antd <span class="token operator">&gt;</span> enter键
</code></pre></div><ol start="3"><li>安装依赖包</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>yarn <span class="token comment">// 或者 npm install</span>
</code></pre></div><ol start="4"><li>启动项目</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>yarn start
</code></pre></div><h2 id="generator-react-webpack"><a href="#generator-react-webpack" class="header-anchor">#</a> generator-react-webpack</h2> <p>优点介绍：</p> <div class="language-sh extra-class"><pre class="language-text"><code>● 基于webpack构建，可以很容易的配置自己需要的webpack。
● 支持ES6，集成了Babel-Loader。
● 支持不同风格的CSS（sass，less，stylus）。
● 支持PostCSS转换样式。
● 集成了esLint功能。
● 可以轻松配置单元测试，比如Karma和Mocha
</code></pre></div><p>安装</p> <p>装还是在命令行用npm进行安装，不过在全局安装generator-react-webpack之前，你可以先安装yeoman。命令如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">-</span>g yo
npm install <span class="token operator">-</span>g generator<span class="token operator">-</span>react<span class="token operator">-</span>webpack
</code></pre></div><p>创建目录</p> <p>我们先用命令自行创建一个文件：new-react-demo</p> <div class="language-js extra-class"><pre class="language-js"><code>mkdir <span class="token keyword">new</span><span class="token operator">-</span>react<span class="token operator">-</span>demo
</code></pre></div><p>进入这个文件夹</p> <div class="language-js extra-class"><pre class="language-js"><code>cd <span class="token keyword">new</span><span class="token operator">-</span>react<span class="token operator">-</span>demo
</code></pre></div><p>用生成器生成我们的项目目录</p> <div class="language-js extra-class"><pre class="language-js"><code>yo react<span class="token operator">-</span>webpack
</code></pre></div><p>用npm start就可以查看效果了。</p> <div class="tip custom-block"><p class="custom-block-title">总结</p> <p>generator-react-webpack更容易配置webpack，让你适应你的实际项目，并且有很强的扩展功能，但也有缺点，就是要依靠yeoman来生成。</p></div> <h2 id="构建：webpack一步一步构建01"><a href="#构建：webpack一步一步构建01" class="header-anchor">#</a> 构建：webpack一步一步构建01</h2> <p>安装webpack</p> <p>在安装webpack之前，我们先建立一个文件夹并进入，当然你可以用其他方法，我这里就用命令了。</p> <div class="language-js extra-class"><pre class="language-js"><code>mkdir react<span class="token operator">-</span>webpack
cd react<span class="token operator">-</span>webpack
</code></pre></div><p>进入文件夹后对我们的webpack项目进行初始化，命令如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>npm n init
</code></pre></div><p>初始化成功后可以在项目根目录下看到package.json文件。如果你一路按回车感觉有些麻烦，你可以直接加一个-y参数，这样npm就直接给我们生成了。</p> <div class="language-js extra-class"><pre class="language-js"><code>npm n init <span class="token operator">-</span>y
</code></pre></div><p>package.json文件建立好以后，你可以安装webpack了</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev webpack
</code></pre></div><p>建议使用cnpm来进行安装，这样速度会快很多。安装好后，你会在package.json里看到你安装的版本号。这样我们webpack就安装好了。</p> <p>配置webpack.config.js</p> <p>在项目根目录建立webpack.config.js文件，这个文件是进行webpack配置的，先建立基本的入口和出口文件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> path <span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//入口文件</span>
    entry<span class="token operator">:</span><span class="token string">'./app/index.js'</span><span class="token punctuation">,</span>
    <span class="token comment">//出口文件</span>
    output<span class="token operator">:</span><span class="token punctuation">{</span>
        filename<span class="token operator">:</span><span class="token string">'index.js'</span><span class="token punctuation">,</span>
        path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上边的代码只定义了入口文件和出口文件，如果你对这些还看不懂，那请学习我的《webpack3.x版 成神之路》 。文件配置好后，我们要根据文件的结构改造我们的项目目录，我们在根目录下新建app和dist文件夹，然后进入app文件夹，新建一个index.js文件。
新建index.html文件</p> <p>在根目录新建index.html文件，并引入webpack设置中的出口文件，代码如下。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">&quot;X-UA-Compatible&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;ie=edge&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>React全家桶<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>引入出口文件<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./dist/index.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>测试webpack配置</p> <p>通过上面的步骤，配置好了wbpack，现在可以测试一下我们webpack配置是否有问题。在路口文件中写入下面的代码，并进行打包测试。</p> <p>/app/index.js文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'Hello World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>加入打包命令</p> <p>打开package.json文件，在scripts属性中加入build命令。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>在终端中输入npm run build ，就可以看到打包结果了。如果没有出现错误，在浏览器中打开，可以看到我们的编写结果。到这部为止，我们正确安装了webpack，并进行了出入口的配置，也看到了webpack的输出结果。</p> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>如果打包不成功，需要安装npm install --save-dev webpack-cli，然后在重新打包。</p></div> <p>开发服务器配置</p> <p>你会很容易的发现，我们现在缺少一个实时更新的服务，那动手马上配置一个。</p> <p>在命令行安装webpack-dev-server,在终端中输入下面的命令。</p> <div class="language-js extra-class"><pre class="language-js"><code>cnpm install <span class="token operator">--</span>save<span class="token operator">-</span>dev webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server
</code></pre></div><p>安装完成后，配置webpack.config.js文件。</p> <div class="language-js extra-class"><pre class="language-js"><code>devServer<span class="token operator">:</span><span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span><span class="token string">'./'</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span><span class="token string">'localhost'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span><span class="token number">1717</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置好后再packeage.json里增加一个scripts命令，我们起名叫server。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --open&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>这里的–open是直接打开浏览器的意思。这些都配置完成后，就可以在终端输入npm run server 看到结果了。</p> <p>自动刷新浏览器</p> <p>在我们修改代码时，现在并不能自动刷新浏览器，不会立即呈现我们编写的代码结果，而时要再次npm run build才可以。其实只要在出口文件配置中加一个publicPath:’temp/’,然后在index.html引入JS时写这个temp地址就可以实时预览了。</p> <div class="language-js extra-class"><pre class="language-js"><code>output<span class="token operator">:</span><span class="token punctuation">{</span>
    filename<span class="token operator">:</span><span class="token string">'index.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    publicPath<span class="token operator">:</span><span class="token string">'temp/'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>index.html文件引入JS</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./temp/index.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>总结：这节课主要是先设置好webpack的基本配置，这些配置其实在以前的课程中都已经讲过，但是我们还是需要重新配置一遍，因为如果你不配置，你下面的课程将没办法继续操作。</p> <h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <blockquote><p>挂载</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>当组件实例被创建并插入 <span class="token constant">DOM</span> 中时，其生命周期调用顺序如下：

● <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
● <span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
● <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
● <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

注意<span class="token operator">:</span>
下述生命周期方法即将过时，在新代码中应该避免使用它们：
<span class="token function">UNSAFE_componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>更新</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>当组件的 props 或 state 发生变化时会触发更新。组件更新的生命周期调用顺序如下：

● <span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
● <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 如果 shouldComponentUpdate() 返回值为 false，则不会调用 componentDidUpdate()。</span>
● <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
● <span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 不常用</span>
● <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">,</span> prevState<span class="token punctuation">,</span> snapshot<span class="token punctuation">)</span>  <span class="token comment">// 会在更新后会被立即调用。首次渲染不会执行此方法。</span>

注意<span class="token operator">:</span>
下述方法即将过时，在新代码中应该避免使用它们：
<span class="token function">UNSAFE_componentWillUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">UNSAFE_componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>卸载</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>当组件从 <span class="token constant">DOM</span> 中移除时会调用如下方法：
● <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 会在组件卸载及销毁之前直接调用</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/react/react.html" class="prev">
          React基础
        </a></span> <span class="next"><a href="/react/base.html">
          基础知识
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.af8c451a.js" defer></script><script src="/assets/js/35.1141f38d.js" defer></script>
  </body>
</html>
