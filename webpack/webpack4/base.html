<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack 4+基础 | 小杨--个人笔记</title>
    <meta name="description" content="详情描述">
    <link rel="icon" href="/iamges/favicons.ico">
    
    <link rel="preload" href="/assets/css/0.styles.56c699db.css" as="style"><link rel="preload" href="/assets/js/app.af8c451a.js" as="script"><link rel="preload" href="/assets/js/54.0fa4079f.js" as="script"><link rel="prefetch" href="/assets/js/10.f9ce7cc1.js"><link rel="prefetch" href="/assets/js/11.dffd68cf.js"><link rel="prefetch" href="/assets/js/12.88b968c3.js"><link rel="prefetch" href="/assets/js/13.ee021609.js"><link rel="prefetch" href="/assets/js/14.0d9da61d.js"><link rel="prefetch" href="/assets/js/15.cf7a716a.js"><link rel="prefetch" href="/assets/js/16.68eea69c.js"><link rel="prefetch" href="/assets/js/17.9c9ed280.js"><link rel="prefetch" href="/assets/js/18.3fd6d31e.js"><link rel="prefetch" href="/assets/js/19.d2c7fa8e.js"><link rel="prefetch" href="/assets/js/2.c36408f4.js"><link rel="prefetch" href="/assets/js/20.ad9fa36b.js"><link rel="prefetch" href="/assets/js/21.3829d637.js"><link rel="prefetch" href="/assets/js/22.6294a8c2.js"><link rel="prefetch" href="/assets/js/23.16fcadda.js"><link rel="prefetch" href="/assets/js/24.9f3982d3.js"><link rel="prefetch" href="/assets/js/25.cdd1e6a9.js"><link rel="prefetch" href="/assets/js/26.18563480.js"><link rel="prefetch" href="/assets/js/27.4705311f.js"><link rel="prefetch" href="/assets/js/28.09fcc8b4.js"><link rel="prefetch" href="/assets/js/29.44f1703f.js"><link rel="prefetch" href="/assets/js/3.b8072446.js"><link rel="prefetch" href="/assets/js/30.adbb594e.js"><link rel="prefetch" href="/assets/js/31.00599d01.js"><link rel="prefetch" href="/assets/js/32.61ba3371.js"><link rel="prefetch" href="/assets/js/33.8420b93c.js"><link rel="prefetch" href="/assets/js/34.00f8c821.js"><link rel="prefetch" href="/assets/js/35.1141f38d.js"><link rel="prefetch" href="/assets/js/36.366705ba.js"><link rel="prefetch" href="/assets/js/37.edb9b8b9.js"><link rel="prefetch" href="/assets/js/38.b440a287.js"><link rel="prefetch" href="/assets/js/39.e9b1aaa4.js"><link rel="prefetch" href="/assets/js/4.1c4d5fc0.js"><link rel="prefetch" href="/assets/js/40.16da07a5.js"><link rel="prefetch" href="/assets/js/41.350c3c58.js"><link rel="prefetch" href="/assets/js/42.ab0911d4.js"><link rel="prefetch" href="/assets/js/43.994d22b7.js"><link rel="prefetch" href="/assets/js/44.48fc8e1b.js"><link rel="prefetch" href="/assets/js/45.29742ea8.js"><link rel="prefetch" href="/assets/js/46.5762f1d8.js"><link rel="prefetch" href="/assets/js/47.71e23426.js"><link rel="prefetch" href="/assets/js/48.95d09945.js"><link rel="prefetch" href="/assets/js/49.e86f75cc.js"><link rel="prefetch" href="/assets/js/5.f72b9a19.js"><link rel="prefetch" href="/assets/js/50.d8548f6b.js"><link rel="prefetch" href="/assets/js/51.b0a7ddfe.js"><link rel="prefetch" href="/assets/js/52.4b63c945.js"><link rel="prefetch" href="/assets/js/53.59e69768.js"><link rel="prefetch" href="/assets/js/55.32bea307.js"><link rel="prefetch" href="/assets/js/6.d9031ffc.js"><link rel="prefetch" href="/assets/js/7.739ee4af.js"><link rel="prefetch" href="/assets/js/8.79012347.js"><link rel="prefetch" href="/assets/js/9.7bcfb182.js">
    <link rel="stylesheet" href="/assets/css/0.styles.56c699db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小杨--个人笔记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/react/" class="nav-link">React</a></div><div class="nav-item"><a href="/flutter/" class="nav-link">Flutter</a></div><div class="nav-item"><a href="/other/" class="nav-link">其他</a></div><div class="nav-item"><a href="/ps/" class="nav-link">Ps教程</a></div><div class="nav-item"><a href="https://github.com/dajun1230/My_notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vue/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/react/" class="nav-link">React</a></div><div class="nav-item"><a href="/flutter/" class="nav-link">Flutter</a></div><div class="nav-item"><a href="/other/" class="nav-link">其他</a></div><div class="nav-item"><a href="/ps/" class="nav-link">Ps教程</a></div><div class="nav-item"><a href="https://github.com/dajun1230/My_notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Webpack</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/webpack/webpack3/base.html" class="sidebar-link">webpack 3+基础</a></li><li><a href="/webpack/webpack4/base.html" class="active sidebar-link">webpack 4+基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#认识webpack的作用" class="sidebar-link">认识webpack的作用</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#webpack快速上手" class="sidebar-link">webpack快速上手</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#入口和出口" class="sidebar-link">入口和出口</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#配置服务和热更新" class="sidebar-link">配置服务和热更新</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#打包css文件" class="sidebar-link">打包css文件</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#插件配置-js代码压缩" class="sidebar-link">插件配置_Js代码压缩</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#html文件的打包" class="sidebar-link">HTML文件的打包</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#css中引用图片" class="sidebar-link">CSS中引用图片</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#css分离和publicpath配置" class="sidebar-link">CSS分离和publicPath配置</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#html中的图片打包" class="sidebar-link">HTML中的图片打包</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#webpack中的less和less分离" class="sidebar-link">webpack中的less和less分离</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#webpack中的sass和sass分离" class="sidebar-link">webpack中的sass和sass分离</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#postcss自动增加css属性前缀" class="sidebar-link">postcss自动增加CSS属性前缀</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#消除无用的css" class="sidebar-link">消除无用的CSS</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#让webpack进行babel转换" class="sidebar-link">让webpack进行babel转换</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#打包后的代码调试" class="sidebar-link">打包后的代码调试</a></li><li class="sidebar-sub-header"><a href="/webpack/webpack4/base.html#webpack-config-js完整版" class="sidebar-link">webpack.config.js完整版</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="webpack-4-基础"><a href="#webpack-4-基础" class="header-anchor">#</a> webpack 4+基础</h1> <h2 id="认识webpack的作用"><a href="#认识webpack的作用" class="header-anchor">#</a> 认识webpack的作用</h2> <ol><li>webpack安装</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span> mkdir webpack_demo <span class="token comment">// 新建webpack_demo文件夹</span>
<span class="token number">2.</span> cd webpack_demo <span class="token comment">// 进入文件架</span>
<span class="token number">3.</span> npm install <span class="token operator">-</span>g webpack <span class="token comment">// 全局安装，但是官方建议不要全局安装，因为安装之后在使用的时候，项目会优先使用本地的webpack</span>
<span class="token number">4.</span> npm install <span class="token operator">-</span>g webpack<span class="token operator">-</span>cli <span class="token comment">// 以上webpack、webpack-cli都会默认安装最新版本（当前版本为：4.41.2、3.3.10）</span>
</code></pre></div><p>经过多次验证，webpack 3+版本，不需要安装webpack-cli，如果安装webpack 4+，不安装webpack-cli，此时打包的时候会提示你：“Do you want to install 'webpack-cli' (yes/no)”，此时，需要全局安装webpack-cli。</p> <h3 id="项目webpack安装"><a href="#项目webpack安装" class="header-anchor">#</a> 项目webpack安装</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span> mkdir webpack_demo
<span class="token number">2.</span> cd webpack_demo
<span class="token number">3.</span> npm init <span class="token operator">-</span>y <span class="token comment">// 生成package.json文件，-y是默认选择</span>
<span class="token number">4.</span> npm install webpack <span class="token operator">--</span>save<span class="token operator">-</span>dev <span class="token comment">// 安装webpack版本（版本号：4.41.2），当前版本为2019/11/10时的最新版本。</span>
<span class="token number">5.</span> npm install webpack<span class="token operator">-</span>cli <span class="token operator">--</span>save<span class="token operator">-</span>dev <span class="token comment">// 安装webpack-cli版本（版本号：3.3.10），当前版本为2019/11/10时的最新版本。</span>
</code></pre></div><h2 id="webpack快速上手"><a href="#webpack快速上手" class="header-anchor">#</a> webpack快速上手</h2> <ol><li>项目搭建完成之后，在package.json同级目录下新建dist、src文件夹，幷在dist文件夹下新建index.html文件，代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">&quot;X-UA-Compatible&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;ie=edge&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Hello Webpack<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;./bundle.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>此处，需要引入同级目录下的bundle.js文件，目前该文件未生成。</p> <ol start="2"><li>在src下新建entry.js（入口）文件，代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;Hello Webpack&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>打开终端，输入命令：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>webpack src<span class="token operator">/</span>entery <span class="token operator">-</span>o dist<span class="token operator">/</span>bundle<span class="token punctuation">.</span>js <span class="token comment">// 格式：webpack 入口文件.js -o 出口文件.js ，-o是到的意思。</span>
</code></pre></div><p>webpack后跟两个参数，前一个是需要打包的文件，后一个是打包后生成的文件。</p> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>终端会提示你，当前打包的环境是生成环境（默认为生产环境，代码文件中代码不换行），<strong>生产环境的打包后文件大小会开发环境的小</strong>，其中开发环境包含一些日志等信息，<strong>生产环境中不会包含注释的代码</strong>，生产环境和开发环境<strong>都会保留console.log()</strong>。</p></div> <p>开发环境打包，需要加上（--mode development），代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>webpack src<span class="token operator">/</span>entery <span class="token operator">--</span>mode development <span class="token operator">-</span>o dist<span class="token operator">/</span>bundle<span class="token punctuation">.</span>js
</code></pre></div><ol start="4"><li>本地启服务器运行查看</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">-</span>g live<span class="token operator">-</span>server <span class="token comment">// 全局安装</span>
live<span class="token operator">-</span>server <span class="token comment">// 输入命令，启动查看</span>
<span class="token comment">//（默认端口为8080，需要更改启动端口，命令：live-server --port=8081，此时端口为8081）</span>
</code></pre></div><h2 id="入口和出口"><a href="#入口和出口" class="header-anchor">#</a> 入口和出口</h2> <ol><li>在项目根目录下创建webpack.config.js，其代码：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>  <span class="token comment">// 值为： development、production、none (默认为 production)</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 入口</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 出口</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 模块</span>
  pulgins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 插件</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// </span>
<span class="token punctuation">}</span>
</code></pre></div><p>或者写成如下也可以：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// mode: 'development',  // 值为： development、production、none (默认为 production)</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 入口</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 出口</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 模块</span>
  pulgins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 插件</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 服务</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><p>最终配置为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 入口</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 出口</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// node的语法，最终结果为基本路径（eg：f:\webpack_demo\dist）</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span> <span class="token comment">// 打包后生成的文件</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 模块</span>
  pulgins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 插件</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 服务</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="mode的使用"><a href="#mode的使用" class="header-anchor">#</a> mode的使用</h3> <p>webpack 4+版本中新增了mode，没有写会默认为<strong>生产环境</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 终端输入： webpack 即打包后文件为生产环境文件；输入：webpack --mode development 即打包后文件为</span>
webpack
<span class="token comment">// 或者</span>
webpack <span class="token operator">--</span>mode development
</code></pre></div><p>可以直接webpack.config.js文件中直接配置mode的值，即更改打包后文件的环境。</p> <h3 id="path的讲解"><a href="#path的讲解" class="header-anchor">#</a> path的讲解</h3> <p>插入：path.resolve(__dirname, 'dist')语法介绍，根目录下新建newjs.js文件，代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'是什么：'</span><span class="token operator">+</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>然后终端输入：</p> <div class="language-js extra-class"><pre class="language-js"><code>node newjs<span class="token punctuation">.</span>js
</code></pre></div><p>打印出的结果为： 是什么：f:\webpack_demo\dist</p> <p>最后终端输入：</p> <div class="language-js extra-class"><pre class="language-js"><code>webpack
</code></pre></div><p>结果显示和之前一样的结果。但是目前是单入口，单出口，如何更改为多入口，多出口呢？</p> <h3 id="多入口、多出口"><a href="#多入口、多出口" class="header-anchor">#</a> 多入口、多出口</h3> <p>当需要配置多入口、和多出口时，同时也需要在index.html文件中，引入多个js文件，同时配置文件更改如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 两个入口，需要对应两个出口</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
    entry2<span class="token operator">:</span> <span class="token string">'./src/entry2.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 出口</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span> <span class="token comment">// 打包后生成的文件为entry.bunble.js和entry2.bunble.js，和入口文件时的字段名称一致</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  pulgins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>最后终端输入：webpack 命令进行打包。</p> <h2 id="配置服务和热更新"><a href="#配置服务和热更新" class="header-anchor">#</a> 配置服务和热更新</h2> <p>配置服务主要是配置devServer，有四个参数，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 入口</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 出口</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// node的语法，最终结果为基本路径（eg：f:\webpack_demo\dist）</span>
    filename<span class="token operator">:</span> <span class="token string">'bundle.js'</span> <span class="token comment">// 打包后生成的文件</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 模块</span>
  pulgins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 插件</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 绝对路径，告诉服务器从何处提供内容。仅当您要提供静态文件时才需要这样做。</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.0.101'</span><span class="token punctuation">,</span> <span class="token comment">// 本地地址, 如果注释掉，则会默认为 localhost</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 对所有服务启用gzip压缩</span>
    post<span class="token operator">:</span> <span class="token number">1717</span> <span class="token comment">// 端口，默认端口为8080</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 启用webpack的热模块更换功能，默认为true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置完成之后，需要在终端输入：</p> <div class="language-js extra-class"><pre class="language-js"><code>webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server
</code></pre></div><p>此时，会报错，会提示不存在该命令，此时需要安装依赖，如下：（报错原因如下：终端使用的是本地npm/node_modules里面的依赖包，而npm run server这种命令是调用的是该文件下node_modules下面的依赖包）</p> <div class="language-js extra-class"><pre class="language-js"><code>cnpm install webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">--</span>save<span class="token operator">-</span>dev
</code></pre></div><p>同时，需要将package.json文件中的“script”出完全替换，如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>此时在终端输入命令： <strong>webpack-dev-server</strong>，成功之后将后续显示的网址输入后在浏览器中打开，<strong>地址为: localhost:1717 或者 192.168.0.101：1717</strong>。</p> <p>同时，修改入口文件中的内容，页面上的内容也会更新，完成了热更新。<strong>（切记：index.html中引入的js文件要和对应打包的js相对应）</strong></p> <p>此时，package.json内容为：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.41.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.3.10&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.9.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="打包css文件"><a href="#打包css文件" class="header-anchor">#</a> 打包css文件</h2> <p>在更高层面，在 webpack 的配置中 loader 有两个目标：</p> <div class="language-sh extra-class"><pre class="language-text"><code>1. test 属性，用于标识出应该被对应的 loader 进行转换的某个或某些文件。
2. use 属性，表示进行转换时，应该使用哪个 loader。
</code></pre></div><ol><li>在src文件夹下新建css文件夹，并增加index.css，写入如下代码：</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>在src/entry.js中引入当前css；</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./css/index.css'</span><span class="token punctuation">;</span> <span class="token comment">// es6引入css语法</span>

document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;Hello Webpack!&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>在webpack.config.js下的module对象下写入：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 第一种写法：使用use</span>
  <span class="token comment">// loader: ['style-loader', 'css-loader'] // 第二种写法：使用loader</span>
  <span class="token comment">/* use：[ // 第三种写法：use + loader
    {
      loader: 'style-loader'
    }, {
      loader: 'css-loader'
    }
  ] */</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>安装style-loader，css-loader：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install style<span class="token operator">-</span>loader css<span class="token operator">-</span>loader <span class="token operator">--</span>save<span class="token operator">-</span>dev <span class="token comment">// 安装依赖</span>
</code></pre></div><ol start="5"><li>启动，运行：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm run server <span class="token comment">// 效果为，背景为红色，字体加粗为白色。</span>
</code></pre></div><p>此时，终端输入命令：webpack 进行打包时，打包后的css会在js中，没有单独分离开来。</p> <p>webpack.config.js完整代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
    about<span class="token operator">:</span> <span class="token string">'./src/about.js'</span><span class="token punctuation">,</span>
    home<span class="token operator">:</span> <span class="token string">'./src/home.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.0.102'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8082</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><h2 id="插件配置-js代码压缩"><a href="#插件配置-js代码压缩" class="header-anchor">#</a> 插件配置_Js代码压缩</h2> <p>webpack.config.js更改如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> uglify <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 引入api插件</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
    about<span class="token operator">:</span> <span class="token string">'./src/about.js'</span><span class="token punctuation">,</span>
    home<span class="token operator">:</span> <span class="token string">'./src/home.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 使用，进行压缩</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.0.102'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8082</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>配置完成之后，在终端输入：webpack 进行打包，打包完成之后可以对比使用该插件与不适用该插件的文件大小的差别。</li></ol> <h2 id="html文件的打包"><a href="#html文件的打包" class="header-anchor">#</a> HTML文件的打包</h2> <ol><li>将dist文件夹下的所有文件进行删除</li> <li>在src目录下新建index.html文件，如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">&quot;X-UA-Compatible&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;ie=edge&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Hello Webpack<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><ol start="3"><li>安装html-webpack-plugin插件</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin
</code></pre></div><ol start="4"><li>更改webpack.config.js文件，其中引入html-webpack-plugin插件，如下：
引入：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> htmlPulgin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>并更改plugins对象，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlPulgin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 引入并使用</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 压缩</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;div id=&quot;title&quot;&gt;&lt;/div&gt;去掉引号后变成&lt;div id=title&gt;&lt;/div&gt;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 哈希值，防止我们进行缓存，类似与key值</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span> <span class="token comment">// 模板文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>webpack.config.js完整代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlPulgin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打包html文件</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlPulgin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 引入并使用</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 压缩</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;div id=&quot;title&quot;&gt;&lt;/div&gt;去掉引号后变成&lt;div id=title&gt;&lt;/div&gt;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 哈希值，防止我们进行缓存，类似与key值</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span> <span class="token comment">// 模板文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.0.102'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8082</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><ol start="5"><li>重新在终端输入：webpack 命令，会在dist文件下生成index.html、entry.js两个文件，其中index.html如下：</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span>en</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span>UTF-8</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>viewport</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span>X-UA-Compatible</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello Webpack<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 其中去掉了双引号，自动引入js文件，增加?462b7f8cf7c42b4258e4即代表hash值。 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>text/javascript</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span>entry.js?462b7f8cf7c42b4258e4</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="css中引用图片"><a href="#css中引用图片" class="header-anchor">#</a> CSS中引用图片</h2> <ol><li>在src下新建images文件夹，并存放一张timg.jpg格式的图片。</li> <li>在index.html文件中增加标签，修改如下：</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello Webpack<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- id为img为设置背景图片 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>更改css文件，写入背景图片，</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#img</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/timg.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>安装url-loader、file-loader</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install url<span class="token operator">-</span>loader file<span class="token operator">-</span>loader <span class="token operator">--</span>save<span class="token operator">-</span>dev
</code></pre></div><ol start="5"><li>增加webpack配置文件中的module模块，</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)/</span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      limit<span class="token operator">:</span> <span class="token number">50000</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">说明</p> <p>注：此处单位为bit，该数字与图片大小进行比较，如果limit &gt; 图片大小，则图片会转为base64进行打包；如果limit &lt; 图片大小，则图片不会转格式，在dist目录下会生成一张图片，名字不一样。（其中，<strong>file-loader</strong>主要是作用于当图片没有进行base64转换后打包时，其引用路径就会发生改变，而file-loader则会更正引用路径。）</p></div> <p>此时，webpack.config.js完整代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlPulgin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'[name].js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'style-loader'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'css-loader'</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">50000</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlPulgin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 压缩</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;div id=&quot;title&quot;&gt;&lt;/div&gt;去掉引号后变成&lt;div id=title&gt;&lt;/div&gt;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 哈希值，防止我们进行缓存，类似与key值</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span> <span class="token comment">// 模板文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.0.102'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8082</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><h2 id="css分离和publicpath配置"><a href="#css分离和publicpath配置" class="header-anchor">#</a> CSS分离和publicPath配置</h2> <h3 id="css分离"><a href="#css分离" class="header-anchor">#</a> CSS分离</h3> <ol><li>css分离需要安装mini-css-extract-plugin插件</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev mini<span class="token operator">-</span>css<span class="token operator">-</span>extract<span class="token operator">-</span>plugin
</code></pre></div><ol start="2"><li>修改webpack.config.js，引入插件，并使用，代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> miniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>在plugins中进行使用，代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">miniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 这里的配置和webpackOptions.output中的配置相似</span>
    <span class="token comment">// 即可以通过在名字前加路径，来决定打包后的文件存在的路径</span>
    filename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">'css/[name].css'</span> <span class="token operator">:</span> <span class="token string">'css/[name].[hash].css'</span><span class="token punctuation">,</span>
    chunkFilename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">'css/[id].css'</span> <span class="token operator">:</span> <span class="token string">'css/[id].[hash].css'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><ol start="4"><li>将原有处理css的修改如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 这里可以指定一个 publicPath</span>
            <span class="token comment">// 默认使用 webpackOptions.output中的publicPath</span>
            <span class="token comment">// publicPath的配置，和plugins中设置的filename和chunkFilename的名字有关</span>
            <span class="token comment">// 如果打包后，background属性中的图片显示不出来，请检查publicPath的配置是否有误</span>
            publicPath<span class="token operator">:</span> <span class="token string">'./'</span><span class="token punctuation">,</span>  
            <span class="token comment">// publicPath: devMode ? './' : '../',   // 根据不同环境指定不同的publicPath</span>
            hmr<span class="token operator">:</span> devMode<span class="token punctuation">,</span> <span class="token comment">// 仅dev环境启用HMR功能</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">'css-loader'</span>
      <span class="token punctuation">]</span>
      <span class="token comment">// use: [{ // 原有</span>
      <span class="token comment">//   loader: 'style-loader'</span>
      <span class="token comment">// }, {</span>
      <span class="token comment">//   loader: 'css-loader'</span>
      <span class="token comment">// }]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>在终端输入命令：“webpack”进行打包查看
此时webpack.config.js的完成代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlPulgin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> miniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
    home<span class="token operator">:</span> <span class="token string">'./src/home.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'js/[name].js'</span> <span class="token comment">// 前一个js代表js文件夹的意思，如果不写，则直接放到dist目录下</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
            outputPath<span class="token operator">:</span> <span class="token string">'images'</span> <span class="token comment">// 这是将图片统一放到dist目录的images文件夹下，如果没写，则放到dist目录下</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlPulgin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 压缩</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;div id=&quot;title&quot;&gt;&lt;/div&gt;去掉引号后变成&lt;div id=title&gt;&lt;/div&gt;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 哈希值，防止我们进行缓存，类似与key值</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span> <span class="token comment">// 模板文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">miniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/[name].css'</span><span class="token punctuation">,</span> <span class="token comment">// 前面这个css，代表的是css文件夹，如果不写，则直接放在dist文件下</span>
      chunkFilename<span class="token operator">:</span> <span class="token string">'css/[id].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.1.3'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8082</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><h3 id="publicpath的使用"><a href="#publicpath的使用" class="header-anchor">#</a> publicPath的使用</h3> <blockquote><p>将css分离出来之后，会存在引用图片路径问题，当图片的大小小于limit的时候，是不会进行base位转换，而是直接生成图片并引用，然后将css分离成单独文件之后，引用路径就发生了改变，此时就需要配置publicPath。</p></blockquote> <ol><li>将图片打包中的limit：50000值改小，确保图片在打包时不会进行base 64位转换。</li> <li>在webpack.config.js增加如下配置，如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 此处为新增配置</span>
              <span class="token comment">// 这里可以指定一个 publicPath</span>
              <span class="token comment">// 默认使用 webpackOptions.output中的publicPath</span>
              <span class="token comment">// publicPath的配置，和plugins中设置的filename和chunkFilename的名字有关</span>
              <span class="token comment">// 如果打包后，background属性中的图片显示不出来，请检查publicPath的配置是否有误</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span><span class="token punctuation">,</span> <span class="token comment">// 此处为设置css中引用图片的问题，如果css与images并存于dist目录下，则使用“../”  </span>
              <span class="token comment">// publicPath: devMode ? './' : '../',   // 根据不同环境指定不同的publicPath</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时打包完成的时候，图片都以绝对路径来引用的。</p> <ol start="3"><li>终端输入“webpack”命令进行打包查看。</li></ol> <p>此时，webpack.config.js的配置文件如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlPulgin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> miniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> devMode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
    home<span class="token operator">:</span> <span class="token string">'./src/home.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'js/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 这里可以指定一个 publicPath</span>
              <span class="token comment">// 默认使用 webpackOptions.output中的publicPath</span>
              <span class="token comment">// publicPath的配置，和plugins中设置的filename和chunkFilename的名字有关</span>
              <span class="token comment">// 如果打包后，background属性中的图片显示不出来，请检查publicPath的配置是否有误</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span><span class="token punctuation">,</span>  
              <span class="token comment">// publicPath: devMode ? './' : '../',   // 根据不同环境指定不同的publicPath</span>
              hmr<span class="token operator">:</span> devMode<span class="token punctuation">,</span> <span class="token comment">// 仅dev环境启用HMR功能</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
            outputPath<span class="token operator">:</span> <span class="token string">'images'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlPulgin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 压缩</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;div id=&quot;title&quot;&gt;&lt;/div&gt;去掉引号后变成&lt;div id=title&gt;&lt;/div&gt;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 哈希值，防止我们进行缓存，类似与key值</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span> <span class="token comment">// 模板文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">miniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 这里的配置和webpackOptions.output中的配置相似</span>
      <span class="token comment">// 即可以通过在名字前加路径，来决定打包后的文件存在的路径</span>
      filename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">'css/[name].css'</span> <span class="token operator">:</span> <span class="token string">'css/[name].[hash].css'</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">'css/[id].css'</span> <span class="token operator">:</span> <span class="token string">'css/[id].[hash].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.1.3'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8082</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><h2 id="html中的图片打包"><a href="#html中的图片打包" class="header-anchor">#</a> HTML中的图片打包</h2> <h3 id="插入："><a href="#插入：" class="header-anchor">#</a> 插入：</h3> <ol><li>如何调用依赖包中的webpack，而不是用本地的webpack</li></ol> <p>在package.json文件中的script出增加build命令，如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span> <span class="token comment">// 此处即调用node_modules文件中的依赖包</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>如何使打包后的图片都放在dist目录下的images文件夹下，代码如下：</li></ol> <p>修改webpack.config.js文件中对于图片模块的配置，增加outputPath配置：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          limit<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
          outputPath<span class="token operator">:</span> <span class="token string">'images'</span> <span class="token comment">// 配置此处，则会在dist文件夹下生成images文件夹，如果不配置，则直接保存在dist文件夹下。</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="html中使用图片"><a href="#html中使用图片" class="header-anchor">#</a> HTML中使用图片</h3> <blockquote><p>当我们在html代码中写入img标签，并引用图片路径时，直接打包出来的文件夹里面的图片没有此图片，因为webpack没有对标签里面的图片进行处理。然而，国人对此问题，增加了一个html-withimg-loader的包（github.com上直接搜索该单词可以查到）。</p></blockquote> <p>具体操作步骤，如下：</p> <ol><li>直接安装依赖包</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev html<span class="token operator">-</span>withimg<span class="token operator">-</span>loader
</code></pre></div><ol start="2"><li>在webpack.config.js文件的modules中rules的最后一个进行配置，如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module <span class="token operator">=</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(htm|html)$/i</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'html-withimg-loader'</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>终端输入命令“npm run build”中进行打包查看</li></ol> <p>此时，webpack.config.js文件的代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlPulgin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> miniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> devMode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
    home<span class="token operator">:</span> <span class="token string">'./src/home.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'js/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 这里可以指定一个 publicPath</span>
              <span class="token comment">// 默认使用 webpackOptions.output中的publicPath</span>
              <span class="token comment">// publicPath的配置，和plugins中设置的filename和chunkFilename的名字有关</span>
              <span class="token comment">// 如果打包后，background属性中的图片显示不出来，请检查publicPath的配置是否有误</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span><span class="token punctuation">,</span>  
              <span class="token comment">// publicPath: devMode ? './' : '../',   // 根据不同环境指定不同的publicPath</span>
              hmr<span class="token operator">:</span> devMode<span class="token punctuation">,</span> <span class="token comment">// 仅dev环境启用HMR功能</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
            outputPath<span class="token operator">:</span> <span class="token string">'images'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(htm|html)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'html-withimg-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlPulgin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 压缩</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;div id=&quot;title&quot;&gt;&lt;/div&gt;去掉引号后变成&lt;div id=title&gt;&lt;/div&gt;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 哈希值，防止我们进行缓存，类似与key值</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span> <span class="token comment">// 模板文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">miniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 这里的配置和webpackOptions.output中的配置相似</span>
      <span class="token comment">// 即可以通过在名字前加路径，来决定打包后的文件存在的路径</span>
      filename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">'css/[name].css'</span> <span class="token operator">:</span> <span class="token string">'css/[name].[hash].css'</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">'css/[id].css'</span> <span class="token operator">:</span> <span class="token string">'css/[id].[hash].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.1.3'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8082</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div><h2 id="webpack中的less和less分离"><a href="#webpack中的less和less分离" class="header-anchor">#</a> webpack中的less和less分离</h2> <h3 id="less在webpack中的应用"><a href="#less在webpack中的应用" class="header-anchor">#</a> less在webpack中的应用</h3> <ol><li>安装less依赖</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev less less<span class="token operator">-</span>loader
</code></pre></div><p>2.在webpack.config.js中配置less，以自动转为css，配置如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module <span class="token operator">=</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.less/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 切记需要将“less-loader”放到最后</span>
      <span class="token comment">// use: [ // 第二种写法</span>
      <span class="token comment">//   {</span>
      <span class="token comment">//     loder: 'style-loader'</span>
      <span class="token comment">//   }, {</span>
      <span class="token comment">//     loder: 'css-loader'</span>
      <span class="token comment">//   }, {</span>
      <span class="token comment">//     loader: 'less-loader'</span>
      <span class="token comment">//   }</span>
      <span class="token comment">// ]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>在src的css文件夹下新建gogo.less，并在entry.js中引用，代码如下:</li></ol> <div class="language-less extra-class"><pre class="language-less"><code><span class="token variable">@bgcolor<span class="token punctuation">:</span></span> #000<span class="token punctuation">;</span>

<span class="token selector">#gogo</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #bgcolor<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>entry.js引用:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./css/index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/ceshi.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/gogo.less'</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;Hello Webpack!&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>修改src下的index.html文件，如下：</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello Webpack<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 增加id为gogo的标签 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gogo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./images/girl.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="5"><li>启动项目，查看效果</li></ol> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>此时，对代码进行打包时，打包后的entry.js文件中会包含gogo.less中的语法，简而言之就是less代码并未与js代码进行分离。</p></div> <h3 id="less分离"><a href="#less分离" class="header-anchor">#</a> less分离</h3> <p>修改webpack.config.js，代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module <span class="token operator">=</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.less/</span><span class="token punctuation">,</span>
      <span class="token comment">// use: ['style-loader', 'css-loader', 'less-loader'] // 修改之前</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 修改之后</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>修改之后，再次进行打包，发现dist文件夹下的entry.js文件中的css代码分离出来了。</p> <h2 id="webpack中的sass和sass分离"><a href="#webpack中的sass和sass分离" class="header-anchor">#</a> webpack中的sass和sass分离</h2> <h3 id="sass在webpack中的应用"><a href="#sass在webpack中的应用" class="header-anchor">#</a> sass在webpack中的应用</h3> <ol><li>安装sass依赖</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev node<span class="token operator">-</span>save sass<span class="token operator">-</span>loader
</code></pre></div><p>2.在webpack.config.js中配置sass，以自动转为css，配置如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module <span class="token operator">=</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.less/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 切记需要将“sass-loader”放到最后</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>在src的css文件夹下新建bb.scss，并在entry.js中引用，代码如下:</li></ol> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token property"><span class="token variable">$bgcolor</span></span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>

<span class="token selector">#bb </span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token variable">$bgcolor</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>entry.js引用:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./css/index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/ceshi.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/gogo.less'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/bb.scss'</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;Hello Webpack!&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>修改src下的index.html文件，如下：</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello Webpack<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 增加id为bb的标签 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>gogo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./images/girl.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="5"><li>启动项目，查看效果</li></ol> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>此时，对代码进行打包时，打包后的entry.js文件中会包含bb.scss中的语法，简而言之就是scss代码并未与js代码进行分离。</p></div> <h3 id="less分离-2"><a href="#less分离-2" class="header-anchor">#</a> less分离</h3> <p>修改webpack.config.js，代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module <span class="token operator">=</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.scss/</span><span class="token punctuation">,</span>
      <span class="token comment">// use: ['style-loader', 'css-loader', 'sass-loader'] // 修改之前</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 修改之后</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>修改之后，再次进行打包，发现dist文件夹下的entry.js文件中的css代码分离出来了。</p> <h2 id="postcss自动增加css属性前缀"><a href="#postcss自动增加css属性前缀" class="header-anchor">#</a> postcss自动增加CSS属性前缀</h2> <ol><li>安装依赖包</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev postcss<span class="token operator">-</span>loader autoprefixer
</code></pre></div><ol start="2"><li>在根目录下新建postcss.config.js，代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>配置webpack.config.js，更改如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>modelu<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 这里可以指定一个 publicPath</span>
              <span class="token comment">// 默认使用 webpackOptions.output中的publicPath</span>
              <span class="token comment">// publicPath的配置，和plugins中设置的filename和chunkFilename的名字有关</span>
              <span class="token comment">// 如果打包后，background属性中的图片显示不出来，请检查publicPath的配置是否有误</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span><span class="token punctuation">,</span>  
              <span class="token comment">// publicPath: devMode ? './' : '../',   // 根据不同环境指定不同的publicPath</span>
              hmr<span class="token operator">:</span> devMode<span class="token punctuation">,</span> <span class="token comment">// 仅dev环境启用HMR功能</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token comment">// 增加的配置如下</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span>importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'postcss-loader'</span>
          <span class="token comment">// 'css-loader' //原有配置</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>修改css下的index.css，增加会增加前缀的样式，如下：</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#img</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/timg.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token comment">/* 增加如下两行 */</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 1px 1px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="5"><li>进行打包，终端输入命令“npm run build”，查看打包后的css文件</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">#img</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/34cd34083dd07fb98a9a06b8ea0c609d.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token comment">/* 如下行所示，自动增加webkit前缀 */</span>
  <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 1px 1px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>附(网址)：<br> <a href="https://webpack.js.org/loaders/postcss-loader/#autoprefixing" target="_blank" rel="noopener noreferrer">webpack postcss-loader配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br> <a href="https://github.com/postcss/autoprefixer" target="_blank" rel="noopener noreferrer">github postcss-loader配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="消除无用的css"><a href="#消除无用的css" class="header-anchor">#</a> 消除无用的CSS</h2> <blockquote><p>在项目中，我们可能用经常引用其他的组件库，但是我们只是用到其中的一部分，然而很多的css代码就会一同打包到项目上，造成冗余，另外我们在修改样式过程中，可能很多样式右没有去删除掉，导致遗留在项目上，此时我们就可以去掉该无效的css代码。</p></blockquote> <ol><li>安装依赖包</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">-</span><span class="token constant">D</span> purifycss<span class="token operator">-</span>webpck purify<span class="token operator">-</span>css <span class="token comment">// -D是--save-dev的缩写</span>
<span class="token comment">// 其中purigycss-webpack是依赖于purify-css，所以需要同时安装purify-css</span>
</code></pre></div><ol start="2"><li>在webpakc.config.js中进行引入，同时配置，如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> glob <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'glob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> purifyCSSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'purifycss-webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>同时，plugins中增加配置：</p> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">purifyCSSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    paths<span class="token operator">:</span> glob<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/*.html'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// 意思是对src下的所有html文件就行同步核查，去掉无效的css</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><ol start="3"><li>在index.css增加css代码，如下：</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#img</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/timg.jpg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 1px 1px 0 <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 无id为aaa的标签，所以此处的代码为无效的css代码 */</span>
<span class="token selector">#aaa</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>在终端输入命令“npm run build”进行打包，查看css文件，发现index.css中无效css代码不存在了。</li></ol> <h2 id="让webpack进行babel转换"><a href="#让webpack进行babel转换" class="header-anchor">#</a> 让webpack进行babel转换</h2> <blockquote><p>根据babel-loader的版本号决定安装@babel/core还是babel-core等依赖包。</p></blockquote> <h3 id="webpack-config-js中配置"><a href="#webpack-config-js中配置" class="header-anchor">#</a> webpack.config.js中配置</h3> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>babel-loader和babel-core版本不对应所产生的：<br>
babel-loader 8.x对应babel-core 7.x<br>
babel-loader 7.x对应babel-core 6.x</p></div> <ol><li>安装依赖包</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev babel<span class="token operator">-</span>loader @babel<span class="token operator">/</span>core @babel<span class="token operator">/</span>preset<span class="token operator">-</span>env
<span class="token comment">// babel-loader：用于webpack</span>
<span class="token comment">// @babel/core 对应babel-loader 8.x版本，是babel的核心</span>
<span class="token comment">// @babel/preset-es2015 用于转换es6的语法</span>
<span class="token comment">// @babel/preset-react 用于转换react中的jsx语法</span>
</code></pre></div><ol start="2"><li>在webpack中进行配置</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span>
      exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span> <span class="token comment">// 去除的文件夹，以免node_modules中的js文件一起进行转换了</span>
      use<span class="token operator">:</span> <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">,</span> <span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>更改entry.js文件，使用es6的语法let，如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./css/index.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/ceshi.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/gogo.less'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/bb.scss'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> mm <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
mm<span class="token operator">+=</span><span class="token number">5</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mm<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;Hello Webpack!&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>终端输入命令“npm run build”，进行打包查看，结果发现，打包后的let不见了，变成了var变量。</li></ol> <h3 id="babel-config-js中配置"><a href="#babel-config-js中配置" class="header-anchor">#</a> babel.config.js中配置</h3> <ol><li>在根目录下新建babel.config.js文件，写入如下代码：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">,</span> <span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>去除webpack.config.js中的babel的options配置，如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token operator">:</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span>
      exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token comment">// options: { // 将此处删除或者注释掉</span>
        <span class="token comment">//   presets: ['@babel/preset-react', '@babel/preset-env']</span>
        <span class="token comment">// }</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>终端输入命令“npm run build”，进行打包查看，结果发现，打包后的let不见了，变成了var变量。</li></ol> <h2 id="打包后的代码调试"><a href="#打包后的代码调试" class="header-anchor">#</a> 打包后的代码调试</h2> <blockquote><p>对于打包后的文件，如果有错误，可以进行配置，然后再控制台会将错误结果显示出来。</p></blockquote> <p>配置过程如下：</p> <p>在webpack.config.js文件中的对象里进行配置devtool，具体如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// entry: {},</span>
  <span class="token comment">// output: {},</span>
  <span class="token comment">// modules: {},</span>
  <span class="token comment">// plugins: []</span>
<span class="token punctuation">}</span>
</code></pre></div><p>devtool的值有四种类型：</p> <div class="language-sh extra-class"><pre class="language-text"><code>1. source-map: 打包后会生成独立的文件，并提示多少行、多少列发生错误  
2. cheap-moudle-source-map：打包后会生成独立的文件，只提示多少列发生错误，不提示多少行  
3. eval-source-map：打包文件中提示错误，不单独生成文件，会提示多少行、多少列发生错误，该类型会有安全隐患，所以只能在开发阶段使用。  
4. cheap-moudle-eval-source-map：打包文件中提示错误，只提示多少列发生错误，不提示多少行
</code></pre></div><h2 id="webpack-config-js完整版"><a href="#webpack-config-js完整版" class="header-anchor">#</a> webpack.config.js完整版</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> glob <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'glob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlPulgin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> miniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> devMode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> purifyCSSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'purifycss-webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/entry.js'</span><span class="token punctuation">,</span>
    home<span class="token operator">:</span> <span class="token string">'./src/home.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token operator">:</span> <span class="token string">'js/[name].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 这里可以指定一个 publicPath</span>
              <span class="token comment">// 默认使用 webpackOptions.output中的publicPath</span>
              <span class="token comment">// publicPath的配置，和plugins中设置的filename和chunkFilename的名字有关</span>
              <span class="token comment">// 如果打包后，background属性中的图片显示不出来，请检查publicPath的配置是否有误</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span><span class="token punctuation">,</span>  
              <span class="token comment">// publicPath: devMode ? './' : '../',   // 根据不同环境指定不同的publicPath</span>
              hmr<span class="token operator">:</span> devMode<span class="token punctuation">,</span> <span class="token comment">// 仅dev环境启用HMR功能</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span>importLoaders<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'postcss-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
            outputPath<span class="token operator">:</span> <span class="token string">'images'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(htm|html)$/i</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'html-withimg-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'less-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.scss/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> miniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token operator">:</span> <span class="token string">'../'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          <span class="token comment">// options: {</span>
          <span class="token comment">//   presets: ['@babel/preset-react', '@babel/preset-env']</span>
          <span class="token comment">// }</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlPulgin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 压缩</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// &lt;div id=&quot;title&quot;&gt;&lt;/div&gt;去掉引号后变成&lt;div id=title&gt;&lt;/div&gt;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 哈希值，防止我们进行缓存，类似与key值</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span> <span class="token comment">// 模板文件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">miniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 这里的配置和webpackOptions.output中的配置相似</span>
      <span class="token comment">// 即可以通过在名字前加路径，来决定打包后的文件存在的路径</span>
      filename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">'css/[name].css'</span> <span class="token operator">:</span> <span class="token string">'css/[name].[hash].css'</span><span class="token punctuation">,</span>
      chunkFilename<span class="token operator">:</span> devMode <span class="token operator">?</span> <span class="token string">'css/[id].css'</span> <span class="token operator">:</span> <span class="token string">'css/[id].[hash].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// new purifyCSSPlugin({</span>
    <span class="token comment">//   paths: glob.sync(path.join(__dirname, 'src/*.html'))</span>
    <span class="token comment">// })</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    host<span class="token operator">:</span> <span class="token string">'192.168.1.3'</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">8082</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/webpack/webpack3/base.html" class="prev">
          webpack 3+基础
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.af8c451a.js" defer></script><script src="/assets/js/54.0fa4079f.js" defer></script>
  </body>
</html>
